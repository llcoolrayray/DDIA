#### 请求路由
现在已经将数据分布到多个节点上了，但是仍然有一个悬而未决的问题：当客户端发送请求时，如何知道应该连接哪个节点上？如果发生了分区再平衡，分区和节点之前的
映射关系也会随之改变。这类问题实际属于典型的服务发现，有以下三种处理策略：
1. 允许客户端连接任意节点，如果该节点恰好拥有所请求的分区，则直接处理请求。否则将请求转发到下一个合适的节点。
2. 所有客户端的请求都发送给一个路由，由它负责转发请求到相应的分区中。
3. 客户端能够感知分区和节点的映射关系，可以直接连接目标节点。

不论使用上述的哪种方式，核心问题是：做出路由决策的组件，如何知道分区与节点的映射关系以及其变化情况？

很多的分布式数据系统都依靠独立的协调服务（如ZooKeeper）跟踪集群范围内的元数据。每个节点都向`Zookeeper`注册自己，`Zookeeper`维护了分区到节点的
映射关系。其它的参与者如路由或客户端可以向`Zookeeper`订阅此信息。一旦分区发生了变化或者添加，删除节点，`Zookeeper`就会自动通知路由层，使得路由信息
始终保持最新状态。
